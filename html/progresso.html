<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
    <title>CodeWithUs</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" href="../imgs/image-removebg-preview.png" type="image/png">
    <link rel="stylesheet" href="../CSS/progresso.css">
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>



    <div class="top-rectangle"></div>

    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <img src="logo.png" alt="">
                </span>

                <div class="text logo-text">
                    <span class="name">CodeWithUs</span>
                </div>
            </div>

            <i class='bx bx-chevron-right toggle'></i>
        </header>

        <div class="menu-bar">
            <div class="menu">

                <li class="search-box">
                    <i class='bx bx-search icon'></i>
                    <input type="text" placeholder="Procurar cursos">
                </li>

                <li class="nav-link">
                    <a href="../html/dados.html">
                        <i class='bx bx-user icon'></i>
                        <span class="text nav-text">Meus dados</span>
                    </a>
                </li>

                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="../html/index_after.html">
                            <i class='bx bx-home-alt icon'></i>
                            <span class="text nav-text">Início</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="../html/progresso.html">
                            <i class='bx bx-bar-chart-alt-2 icon'></i>
                            <span class="text nav-text">Progresso</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="../html/cursos.html">
                            <i class='bx bx-code-curly icon'></i>
                            <span class="text nav-text">Meus cursos</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="bottom-content">
                <li class="">
                    <a href="../index.html">
                        <i class='bx bx-log-out-circle icon'></i>
                        <span class="text nav-text">Logout</span>
                    </a>
                </li>
            </div>
        </div>
    </nav>

    <div class="title_homeP">
        <h1>Parabéns!<br> Veja o seu <span>progresso</span></h1>
    </div>

    <div class="container">
        <div class="card" id="html-card">
            <h2>Progresso HTML</h2>
            <div class="percentage" id="html-percentage">0%</div>
        </div>
        <div class="card" id="css-card">
            <h2>Progresso CSS</h2>
            <div class="percentage" id="css-percentage">0%</div>
        </div>
        <div class="card" id="js-card">
            <h2>Progresso JavaScript</h2>
            <div class="percentage" id="js-percentage">0%</div>
        </div>
        <div class="card" id="react-card">
            <h2>Progresso Mysql</h2>
            <div class="percentage" id="mysql-percentage">0%</div>
        </div>
        <div class="card" id="nodejs-card">
            <h2>Progresso Git</h2>
            <div class="percentage" id="git-percentage">0%</div>
        </div>
    </div>

    <img src="../imgs/logo.png" alt="Imagem" class="top-right-image">

    <script>
        // Função para carregar o progresso do servidor
        async function loadProgress() {
            try {
                // Fazendo a requisição para a API do backend
                const response = await fetch('/api/progresso');
                const progresso = await response.json();

                // Atualizando os valores dos cards com os dados do banco de dados
                document.getElementById('html-percentage').innerText = `${progresso.html}%`;
                document.getElementById('css-percentage').innerText = `${progresso.css}%`;
                document.getElementById('js-percentage').innerText = `${progresso.javascript}%`;
                document.getElementById('mysql-percentage').innerText = `${progresso.mysql}%`;
                document.getElementById('git-percentage').innerText = `${progresso.git}%`;
            } catch (error) {
                console.error('Erro ao carregar o progresso:', error);
            }
        }

        // Chama a função ao carregar a página
        window.onload = loadProgress;
    </script>

    <img src="../imgs/logo.png" alt="Imagem" class="top-right-image">

    <script src="../script.js"></script>
</body>

</html>